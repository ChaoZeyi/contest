这里总结一下决赛和复赛的区别：

1. 首先是输入输出文件，复赛是给你一个用例输入，描述了网络结构、链路价格、部署成本、服务器硬件成本，在90S后你要返回一个输出文件；决赛的话。用例输入不仅包含了上述所有，还有上一轮的抢点信息、对方ID、本队ID、余额，每10S给出一个部署方案，返回一个输出文件，判题系统会自动计算输出是否规范、本轮花费、本队余额以及你能抢到哪些点，并在下一轮以输入文件形式返回给玩家。
2. 时间变短了，由90S变成了10S，用例节点规模变大了，由之前最大的800个点变成了现在的1000-2000个点，感觉难度更大了，可能10S都来不及输出一个部署方法，但其实可以看到之前为了得到部署方案，是对费用流函数的一系列迭代，主要时间是花在费用流上，但现在不需要满足所有的消费节点，重点是怎么选择服务器，怎么选择要服务的消费节点，使得服务器流量不浪费，尽可能多的服务消费节点，并且最大化抢到的概率。
3. 在决定部署方案时，不仅要考虑自己抢哪些消费节点最划算，还要估计对手会抢哪些消费节点，以多大的流量去抢，因为根据输入文件，你只能得到对手抢到了哪些，并不知道是以多大流量去抢的，所以这些都需要估计，怎么才能把对手的点抢过来，并且保住自己的点，最大化收益。因为你给消费节点提供的流量越多，抢到的概率就越大，但不能无限大的提供，因为你的余额是确定的，部署的服务器个数也就相对确定了，所以你提供的流量越多，说明你能服务的点就变少了，那对手完全就可以选择那些你没有服务的点，以更低的流量抢到，这样就不划算了。

所以，决赛的难点还是很多的，不仅包含复赛的服务器位置选择、档位选择，更难的是策略，每轮花多少钱，买多少服务器，买哪些服务器，服务哪些消费节点，以多大的流量去服务，这些都是要考虑的，还要估计对手的策略，他可能会抢哪些点，以多大流量去抢，如果他这样抢的话，我们还要不要跟他抢这些点，如果抢的话，以多大的流量去抢，不抢的话，我们避开这些点，应该选择哪些点去抢..........

虽然比赛已经结束了，但现在一考虑这些问题，还是觉得头疼=_=

我们的策略是每轮都把钱花完，因为只有把钱花完了，你才可以部署更多的服务器，提供更多的流量，抢到更多的消费节点，得到盈利，然后再这样循环下去。

然后是服务器的选择，我们尝试了两种方法，首先是选择那些通量最大的，但当时出现了很大的流量浪费，我们以为是因为通量较大的网络节点比较集中，所以都在通量大的点部署服务器，可能存在链路冲突，服务器的流量流不出去，所以我们后来加了个判断，只部署那些非相邻节点中通量最大的点，但其实后来事实证明，流量浪费是因为有些消费节点的通量限制，比如说这个点的最大通量就是6，你给它提供30的流量，它也就只能流进6的流量，所以对于这些节点，直接把流量定死为最大通量就好，你加的再多也进不去，其实也就是浪费了；还有一种就是跟复赛一样，选择那些性价比最高的，但后来发现这些点的通量都比较小，所以我们采取的是第一种方式。

再就是消费节点的选择，第一轮选择消费节点肯定是选择那些需求最小的，比较划算，但同样的，像这种划算的点，对手也会抢，所以我们就需要在基本需求的基础上加流量，这时候就需要判断应该加多少，才能大概率的抢到，并且尽可能的减少浪费。我们的策略是用所有的流量来满足一部分的消费节点，把所有的流量都平摊到这些节点上，这样的效果确实很好。然后是第二轮及之后，我们就需要对消费节点进行分类，我们抢到的，对手抢到的，双方都没有去抢的，对于这三种类型我们需要加不同的流量，比如说像对方的节点，对方下一轮肯定是会继续抢的，所以我们要加更大的流量才有可能抢到，然后我们对这三类节点加完流量后进行排序，选择打算服务的消费节点，之后的轮数也类似...........

本来以为效果还可以，但决赛当天各种被碾压，不管怎么加流量还是抢不到点，本来是自己的点最后还是被抢走，看来还是策略不够好，考虑的东西太少了，后来颁奖典礼听大家分享算法，确实还是感觉到了差距，大佬们用了期望、方差、概率估计、状态机......还有一些都没听过的算法（比如月光的***，忘了）。

差不多就是这些了，从初赛、复赛到决赛，一路走过来，现在回想还是觉得决赛最辛苦，熬的夜最多，压力最大，一次次的感到绝望，还好有队友们的相互鼓励，一路走到最后，每一天都过的很辛苦很充实（可能当时是觉得痛苦吧，哈哈），其实现在想起来也还好，没什么熬不下去的，忍一忍就过去了。感谢队友的一路carry，感谢学长的包容，哈哈，听到冠军队伍的妹子说这段时间因为搞比赛和男朋友吵了好几架，顿时就笑了，还好我的学长大度，虽然每次我代码写不出来还冲他撒气，嘿嘿~

总共72天，收获了很多，超好的队友（继续横扫各大比赛啊，哈哈），武长赛区的小伙伴们，武长君，华为的小原，可爱的HR们，感谢深圳之行的照顾，玩的很开心（笑脸）。

code Craft！Run the World！！！！

很美好的一段回忆！

下面附上深圳决赛的几张图

![3.jpg](https://github.com/ChaoZeyi/contest/blob/master/huawei2017_codeCraft/photos/3.jpg?raw=true)

![6.jpg](https://github.com/ChaoZeyi/contest/blob/master/huawei2017_codeCraft/photos/6.jpg?raw=true)









































